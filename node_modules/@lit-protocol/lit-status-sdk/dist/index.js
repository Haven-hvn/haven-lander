var GZ=Object.defineProperty;var zJ=(z,J)=>{for(var Z in J)GZ(z,Z,{get:J[Z],enumerable:!0,configurable:!0,set:($)=>J[Z]=()=>$})};var F=(z,J)=>()=>(z&&(J=z(z=0)),J);var JJ;var ZJ=F(()=>{JJ=typeof globalThis==="object"?globalThis:typeof self==="object"?self:typeof window==="object"?window:typeof global==="object"?global:{}});var $J=F(()=>{ZJ()});var V="1.9.0";function UZ(z){var J=new Set([z]),Z=new Set,$=z.match(QJ);if(!$)return function(){return!1};var H={major:+$[1],minor:+$[2],patch:+$[3],prerelease:$[4]};if(H.prerelease!=null)return function Y(h){return h===z};function Q(Y){return Z.add(Y),!1}function X(Y){return J.add(Y),!0}return function Y(h){if(J.has(h))return!0;if(Z.has(h))return!1;var W=h.match(QJ);if(!W)return Q(h);var q={major:+W[1],minor:+W[2],patch:+W[3],prerelease:W[4]};if(q.prerelease!=null)return Q(h);if(H.major!==q.major)return Q(h);if(H.major===0){if(H.minor===q.minor&&H.patch<=q.patch)return X(h);return Q(h)}if(H.minor<=q.minor)return X(h);return Q(h)}}var QJ,HJ;var WJ=F(()=>{QJ=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;HJ=UZ(V)});function O(z,J,Z,$){var H;if($===void 0)$=!1;var Q=v[y]=(H=v[y])!==null&&H!==void 0?H:{version:V};if(!$&&Q[z]){var X=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+z);return Z.error(X.stack||X.message),!1}if(Q.version!==V){var X=new Error("@opentelemetry/api: Registration of version v"+Q.version+" for "+z+" does not match previously registered API v"+V);return Z.error(X.stack||X.message),!1}return Q[z]=J,Z.debug("@opentelemetry/api: Registered a global for "+z+" v"+V+"."),!0}function j(z){var J,Z,$=(J=v[y])===null||J===void 0?void 0:J.version;if(!$||!HJ($))return;return(Z=v[y])===null||Z===void 0?void 0:Z[z]}function k(z,J){J.debug("@opentelemetry/api: Unregistering a global for "+z+" v"+V+".");var Z=v[y];if(Z)delete Z[z]}var OZ,y,v;var E=F(()=>{$J();WJ();OZ=V.split(".")[0],y=Symbol.for("opentelemetry.js.api."+OZ),v=JJ});function S(z,J,Z){var $=j("diag");if(!$)return;return Z.unshift(J),$[z].apply($,VZ([],kZ(Z),!1))}var kZ=function(z,J){var Z=typeof Symbol==="function"&&z[Symbol.iterator];if(!Z)return z;var $=Z.call(z),H,Q=[],X;try{while((J===void 0||J-- >0)&&!(H=$.next()).done)Q.push(H.value)}catch(Y){X={error:Y}}finally{try{if(H&&!H.done&&(Z=$.return))Z.call($)}finally{if(X)throw X.error}}return Q},VZ=function(z,J,Z){if(Z||arguments.length===2){for(var $=0,H=J.length,Q;$<H;$++)if(Q||!($ in J)){if(!Q)Q=Array.prototype.slice.call(J,0,$);Q[$]=J[$]}}return z.concat(Q||Array.prototype.slice.call(J))},XJ;var qJ=F(()=>{E();XJ=function(){function z(J){this._namespace=J.namespace||"DiagComponentLogger"}return z.prototype.debug=function(){var J=[];for(var Z=0;Z<arguments.length;Z++)J[Z]=arguments[Z];return S("debug",this._namespace,J)},z.prototype.error=function(){var J=[];for(var Z=0;Z<arguments.length;Z++)J[Z]=arguments[Z];return S("error",this._namespace,J)},z.prototype.info=function(){var J=[];for(var Z=0;Z<arguments.length;Z++)J[Z]=arguments[Z];return S("info",this._namespace,J)},z.prototype.warn=function(){var J=[];for(var Z=0;Z<arguments.length;Z++)J[Z]=arguments[Z];return S("warn",this._namespace,J)},z.prototype.verbose=function(){var J=[];for(var Z=0;Z<arguments.length;Z++)J[Z]=arguments[Z];return S("verbose",this._namespace,J)},z}()});var w;var n=F(()=>{(function(z){z[z.NONE=0]="NONE",z[z.ERROR=30]="ERROR",z[z.WARN=50]="WARN",z[z.INFO=60]="INFO",z[z.DEBUG=70]="DEBUG",z[z.VERBOSE=80]="VERBOSE",z[z.ALL=9999]="ALL"})(w||(w={}))});function YJ(z,J){if(z<w.NONE)z=w.NONE;else if(z>w.ALL)z=w.ALL;J=J||{};function Z($,H){var Q=J[$];if(typeof Q==="function"&&z>=H)return Q.bind(J);return function(){}}return{error:Z("error",w.ERROR),warn:Z("warn",w.WARN),info:Z("info",w.INFO),debug:Z("debug",w.DEBUG),verbose:Z("verbose",w.VERBOSE)}}var FJ=F(()=>{n()});var DZ=function(z,J){var Z=typeof Symbol==="function"&&z[Symbol.iterator];if(!Z)return z;var $=Z.call(z),H,Q=[],X;try{while((J===void 0||J-- >0)&&!(H=$.next()).done)Q.push(H.value)}catch(Y){X={error:Y}}finally{try{if(H&&!H.done&&(Z=$.return))Z.call($)}finally{if(X)throw X.error}}return Q},CZ=function(z,J,Z){if(Z||arguments.length===2){for(var $=0,H=J.length,Q;$<H;$++)if(Q||!($ in J)){if(!Q)Q=Array.prototype.slice.call(J,0,$);Q[$]=J[$]}}return z.concat(Q||Array.prototype.slice.call(J))},EZ="diag",G;var M=F(()=>{qJ();FJ();n();E();G=function(){function z(){function J(H){return function(){var Q=[];for(var X=0;X<arguments.length;X++)Q[X]=arguments[X];var Y=j("diag");if(!Y)return;return Y[H].apply(Y,CZ([],DZ(Q),!1))}}var Z=this,$=function(H,Q){var X,Y,h;if(Q===void 0)Q={logLevel:w.INFO};if(H===Z){var W=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return Z.error((X=W.stack)!==null&&X!==void 0?X:W.message),!1}if(typeof Q==="number")Q={logLevel:Q};var q=j("diag"),B=YJ((Y=Q.logLevel)!==null&&Y!==void 0?Y:w.INFO,H);if(q&&!Q.suppressOverrideMessage){var K=(h=new Error().stack)!==null&&h!==void 0?h:"<failed to generate stacktrace>";q.warn("Current logger will be overwritten from "+K),B.warn("Current logger will overwrite one already registered from "+K)}return O("diag",B,Z,!0)};Z.setLogger=$,Z.disable=function(){k(EZ,Z)},Z.createComponentLogger=function(H){return new XJ(H)},Z.verbose=J("verbose"),Z.debug=J("debug"),Z.info=J("info"),Z.warn=J("warn"),Z.error=J("error")}return z.instance=function(){if(!this._instance)this._instance=new z;return this._instance},z}()});var MZ=function(z,J){var Z=typeof Symbol==="function"&&z[Symbol.iterator];if(!Z)return z;var $=Z.call(z),H,Q=[],X;try{while((J===void 0||J-- >0)&&!(H=$.next()).done)Q.push(H.value)}catch(Y){X={error:Y}}finally{try{if(H&&!H.done&&(Z=$.return))Z.call($)}finally{if(X)throw X.error}}return Q},TZ=function(z){var J=typeof Symbol==="function"&&Symbol.iterator,Z=J&&z[J],$=0;if(Z)return Z.call(z);if(z&&typeof z.length==="number")return{next:function(){if(z&&$>=z.length)z=void 0;return{value:z&&z[$++],done:!z}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")},hJ;var BJ=F(()=>{hJ=function(){function z(J){this._entries=J?new Map(J):new Map}return z.prototype.getEntry=function(J){var Z=this._entries.get(J);if(!Z)return;return Object.assign({},Z)},z.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(J){var Z=MZ(J,2),$=Z[0],H=Z[1];return[$,H]})},z.prototype.setEntry=function(J,Z){var $=new z(this._entries);return $._entries.set(J,Z),$},z.prototype.removeEntry=function(J){var Z=new z(this._entries);return Z._entries.delete(J),Z},z.prototype.removeEntries=function(){var J,Z,$=[];for(var H=0;H<arguments.length;H++)$[H]=arguments[H];var Q=new z(this._entries);try{for(var X=TZ($),Y=X.next();!Y.done;Y=X.next()){var h=Y.value;Q._entries.delete(h)}}catch(W){J={error:W}}finally{try{if(Y&&!Y.done&&(Z=X.return))Z.call(X)}finally{if(J)throw J.error}}return Q},z.prototype.clear=function(){return new z},z}()});var KJ;var wJ=F(()=>{KJ=Symbol("BaggageEntryMetadata")});function GJ(z){if(z===void 0)z={};return new hJ(new Map(Object.entries(z)))}function jJ(z){if(typeof z!=="string")RZ.error("Cannot create baggage metadata from unknown type: "+typeof z),z="";return{__TYPE__:KJ,toString:function(){return z}}}var RZ;var Vz=F(()=>{M();BJ();wJ();RZ=G.instance()});function R(z){return Symbol.for(z)}var fZ,i;var L=F(()=>{fZ=function(){function z(J){var Z=this;Z._currentContext=J?new Map(J):new Map,Z.getValue=function($){return Z._currentContext.get($)},Z.setValue=function($,H){var Q=new z(Z._currentContext);return Q._currentContext.set($,H),Q},Z.deleteValue=function($){var H=new z(Z._currentContext);return H._currentContext.delete($),H}}return z}(),i=new fZ});var Dz,UJ;var OJ=F(()=>{Dz=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],UJ=function(){function z(){function J($){return function(){var H=[];for(var Q=0;Q<arguments.length;Q++)H[Q]=arguments[Q];if(console){var X=console[$];if(typeof X!=="function")X=console.log;if(typeof X==="function")return X.apply(console,H)}}}for(var Z=0;Z<Dz.length;Z++)this[Dz[Z].n]=J(Dz[Z].c)}return z}()});function kJ(){return Ez}var T,AZ,t,IZ,xZ,bZ,PZ,Cz,dZ,NZ,yZ,Ez,vZ,SZ,LZ,_Z,uZ,mZ,cZ;var Mz=F(()=>{T=function(){var z=function(J,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,H){$.__proto__=H}||function($,H){for(var Q in H)if(Object.prototype.hasOwnProperty.call(H,Q))$[Q]=H[Q]},z(J,Z)};return function(J,Z){if(typeof Z!=="function"&&Z!==null)throw new TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(J,Z);function $(){this.constructor=J}J.prototype=Z===null?Object.create(Z):($.prototype=Z.prototype,new $)}}(),AZ=function(){function z(){}return z.prototype.createGauge=function(J,Z){return SZ},z.prototype.createHistogram=function(J,Z){return LZ},z.prototype.createCounter=function(J,Z){return vZ},z.prototype.createUpDownCounter=function(J,Z){return _Z},z.prototype.createObservableGauge=function(J,Z){return mZ},z.prototype.createObservableCounter=function(J,Z){return uZ},z.prototype.createObservableUpDownCounter=function(J,Z){return cZ},z.prototype.addBatchObservableCallback=function(J,Z){},z.prototype.removeBatchObservableCallback=function(J){},z}(),t=function(){function z(){}return z}(),IZ=function(z){T(J,z);function J(){return z!==null&&z.apply(this,arguments)||this}return J.prototype.add=function(Z,$){},J}(t),xZ=function(z){T(J,z);function J(){return z!==null&&z.apply(this,arguments)||this}return J.prototype.add=function(Z,$){},J}(t),bZ=function(z){T(J,z);function J(){return z!==null&&z.apply(this,arguments)||this}return J.prototype.record=function(Z,$){},J}(t),PZ=function(z){T(J,z);function J(){return z!==null&&z.apply(this,arguments)||this}return J.prototype.record=function(Z,$){},J}(t),Cz=function(){function z(){}return z.prototype.addCallback=function(J){},z.prototype.removeCallback=function(J){},z}(),dZ=function(z){T(J,z);function J(){return z!==null&&z.apply(this,arguments)||this}return J}(Cz),NZ=function(z){T(J,z);function J(){return z!==null&&z.apply(this,arguments)||this}return J}(Cz),yZ=function(z){T(J,z);function J(){return z!==null&&z.apply(this,arguments)||this}return J}(Cz),Ez=new AZ,vZ=new IZ,SZ=new bZ,LZ=new PZ,_Z=new xZ,uZ=new dZ,mZ=new NZ,cZ=new yZ});var o;var VJ=F(()=>{(function(z){z[z.INT=0]="INT",z[z.DOUBLE=1]="DOUBLE"})(o||(o={}))});var a,r;var Tz=F(()=>{a={get:function(z,J){if(z==null)return;return z[J]},keys:function(z){if(z==null)return[];return Object.keys(z)}},r={set:function(z,J,Z){if(z==null)return;z[J]=Z}}});var lZ=function(z,J){var Z=typeof Symbol==="function"&&z[Symbol.iterator];if(!Z)return z;var $=Z.call(z),H,Q=[],X;try{while((J===void 0||J-- >0)&&!(H=$.next()).done)Q.push(H.value)}catch(Y){X={error:Y}}finally{try{if(H&&!H.done&&(Z=$.return))Z.call($)}finally{if(X)throw X.error}}return Q},pZ=function(z,J,Z){if(Z||arguments.length===2){for(var $=0,H=J.length,Q;$<H;$++)if(Q||!($ in J)){if(!Q)Q=Array.prototype.slice.call(J,0,$);Q[$]=J[$]}}return z.concat(Q||Array.prototype.slice.call(J))},DJ;var CJ=F(()=>{L();DJ=function(){function z(){}return z.prototype.active=function(){return i},z.prototype.with=function(J,Z,$){var H=[];for(var Q=3;Q<arguments.length;Q++)H[Q-3]=arguments[Q];return Z.call.apply(Z,pZ([$],lZ(H),!1))},z.prototype.bind=function(J,Z){return Z},z.prototype.enable=function(){return this},z.prototype.disable=function(){return this},z}()});var gZ=function(z,J){var Z=typeof Symbol==="function"&&z[Symbol.iterator];if(!Z)return z;var $=Z.call(z),H,Q=[],X;try{while((J===void 0||J-- >0)&&!(H=$.next()).done)Q.push(H.value)}catch(Y){X={error:Y}}finally{try{if(H&&!H.done&&(Z=$.return))Z.call($)}finally{if(X)throw X.error}}return Q},sZ=function(z,J,Z){if(Z||arguments.length===2){for(var $=0,H=J.length,Q;$<H;$++)if(Q||!($ in J)){if(!Q)Q=Array.prototype.slice.call(J,0,$);Q[$]=J[$]}}return z.concat(Q||Array.prototype.slice.call(J))},Rz="context",nZ,D;var _=F(()=>{CJ();E();M();nZ=new DJ,D=function(){function z(){}return z.getInstance=function(){if(!this._instance)this._instance=new z;return this._instance},z.prototype.setGlobalContextManager=function(J){return O(Rz,J,G.instance())},z.prototype.active=function(){return this._getContextManager().active()},z.prototype.with=function(J,Z,$){var H,Q=[];for(var X=3;X<arguments.length;X++)Q[X-3]=arguments[X];return(H=this._getContextManager()).with.apply(H,sZ([J,Z,$],gZ(Q),!1))},z.prototype.bind=function(J,Z){return this._getContextManager().bind(J,Z)},z.prototype._getContextManager=function(){return j(Rz)||nZ},z.prototype.disable=function(){this._getContextManager().disable(),k(Rz,G.instance())},z}()});var f;var fz=F(()=>{(function(z){z[z.NONE=0]="NONE",z[z.SAMPLED=1]="SAMPLED"})(f||(f={}))});var u="0000000000000000",m="00000000000000000000000000000000",e;var zz=F(()=>{fz();e={traceId:m,spanId:u,traceFlags:f.NONE}});var C;var Jz=F(()=>{zz();C=function(){function z(J){if(J===void 0)J=e;this._spanContext=J}return z.prototype.spanContext=function(){return this._spanContext},z.prototype.setAttribute=function(J,Z){return this},z.prototype.setAttributes=function(J){return this},z.prototype.addEvent=function(J,Z){return this},z.prototype.addLink=function(J){return this},z.prototype.addLinks=function(J){return this},z.prototype.setStatus=function(J){return this},z.prototype.updateName=function(J){return this},z.prototype.end=function(J){},z.prototype.isRecording=function(){return!1},z.prototype.recordException=function(J,Z){},z}()});function Zz(z){return z.getValue(Az)||void 0}function EJ(){return Zz(D.getInstance().active())}function c(z,J){return z.setValue(Az,J)}function MJ(z){return z.deleteValue(Az)}function TJ(z,J){return c(z,new C(J))}function $z(z){var J;return(J=Zz(z))===null||J===void 0?void 0:J.spanContext()}var Az;var Iz=F(()=>{L();Jz();_();Az=R("OpenTelemetry Context Key SPAN")});function xz(z){return iZ.test(z)&&z!==m}function bz(z){return tZ.test(z)&&z!==u}function A(z){return xz(z.traceId)&&bz(z.spanId)}function RJ(z){return new C(z)}var iZ,tZ;var Qz=F(()=>{zz();Jz();iZ=/^([0-9a-f]{32})$/i,tZ=/^[0-9a-f]{16}$/i});function oZ(z){return typeof z==="object"&&typeof z.spanId==="string"&&typeof z.traceId==="string"&&typeof z.traceFlags==="number"}var Pz,Hz;var dz=F(()=>{_();Iz();Jz();Qz();Pz=D.getInstance(),Hz=function(){function z(){}return z.prototype.startSpan=function(J,Z,$){if($===void 0)$=Pz.active();var H=Boolean(Z===null||Z===void 0?void 0:Z.root);if(H)return new C;var Q=$&&$z($);if(oZ(Q)&&A(Q))return new C(Q);else return new C},z.prototype.startActiveSpan=function(J,Z,$,H){var Q,X,Y;if(arguments.length<2)return;else if(arguments.length===2)Y=Z;else if(arguments.length===3)Q=Z,Y=$;else Q=Z,X=$,Y=H;var h=X!==null&&X!==void 0?X:Pz.active(),W=this.startSpan(J,Q,h),q=c(h,W);return Pz.with(q,Y,void 0,W)},z}()});var aZ,Wz;var Nz=F(()=>{dz();aZ=new Hz,Wz=function(){function z(J,Z,$,H){this._provider=J,this.name=Z,this.version=$,this.options=H}return z.prototype.startSpan=function(J,Z,$){return this._getTracer().startSpan(J,Z,$)},z.prototype.startActiveSpan=function(J,Z,$,H){var Q=this._getTracer();return Reflect.apply(Q.startActiveSpan,Q,arguments)},z.prototype._getTracer=function(){if(this._delegate)return this._delegate;var J=this._provider.getDelegateTracer(this.name,this.version,this.options);if(!J)return aZ;return this._delegate=J,this._delegate},z}()});var fJ;var AJ=F(()=>{dz();fJ=function(){function z(){}return z.prototype.getTracer=function(J,Z,$){return new Hz},z}()});var rZ,l;var yz=F(()=>{Nz();AJ();rZ=new fJ,l=function(){function z(){}return z.prototype.getTracer=function(J,Z,$){var H;return(H=this.getDelegateTracer(J,Z,$))!==null&&H!==void 0?H:new Wz(this,J,Z,$)},z.prototype.getDelegate=function(){var J;return(J=this._delegate)!==null&&J!==void 0?J:rZ},z.prototype.setDelegate=function(J){this._delegate=J},z.prototype.getDelegateTracer=function(J,Z,$){var H;return(H=this._delegate)===null||H===void 0?void 0:H.getTracer(J,Z,$)},z}()});var Xz;var IJ=F(()=>{(function(z){z[z.NOT_RECORD=0]="NOT_RECORD",z[z.RECORD=1]="RECORD",z[z.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Xz||(Xz={}))});var qz;var xJ=F(()=>{(function(z){z[z.INTERNAL=0]="INTERNAL",z[z.SERVER=1]="SERVER",z[z.CLIENT=2]="CLIENT",z[z.PRODUCER=3]="PRODUCER",z[z.CONSUMER=4]="CONSUMER"})(qz||(qz={}))});var Yz;var bJ=F(()=>{(function(z){z[z.UNSET=0]="UNSET",z[z.OK=1]="OK",z[z.ERROR=2]="ERROR"})(Yz||(Yz={}))});function PJ(z){return J0.test(z)}function dJ(z){return Z0.test(z)&&!$0.test(z)}var vz="[_0-9a-z-*/]",eZ,z0,J0,Z0,$0;var NJ=F(()=>{eZ="[a-z]"+vz+"{0,255}",z0="[a-z0-9]"+vz+"{0,240}@[a-z]"+vz+"{0,13}",J0=new RegExp("^(?:"+eZ+"|"+z0+")$"),Z0=/^[ -~]{0,255}[!-~]$/,$0=/,|=/});var yJ=32,Q0=512,vJ=",",SJ="=",LJ;var _J=F(()=>{NJ();LJ=function(){function z(J){if(this._internalState=new Map,J)this._parse(J)}return z.prototype.set=function(J,Z){var $=this._clone();if($._internalState.has(J))$._internalState.delete(J);return $._internalState.set(J,Z),$},z.prototype.unset=function(J){var Z=this._clone();return Z._internalState.delete(J),Z},z.prototype.get=function(J){return this._internalState.get(J)},z.prototype.serialize=function(){var J=this;return this._keys().reduce(function(Z,$){return Z.push($+SJ+J.get($)),Z},[]).join(vJ)},z.prototype._parse=function(J){if(J.length>Q0)return;if(this._internalState=J.split(vJ).reverse().reduce(function(Z,$){var H=$.trim(),Q=H.indexOf(SJ);if(Q!==-1){var X=H.slice(0,Q),Y=H.slice(Q+1,$.length);if(PJ(X)&&dJ(Y))Z.set(X,Y)}return Z},new Map),this._internalState.size>yJ)this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,yJ))},z.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},z.prototype._clone=function(){var J=new z;return J._internalState=new Map(this._internalState),J},z}()});function uJ(z){return new LJ(z)}var mJ=F(()=>{_J()});var Sz;var cJ=F(()=>{_();Sz=D.getInstance()});var Lz;var lJ=F(()=>{M();Lz=G.instance()});var H0,pJ;var gJ=F(()=>{Mz();H0=function(){function z(){}return z.prototype.getMeter=function(J,Z,$){return Ez},z}(),pJ=new H0});var _z="metrics",sJ;var nJ=F(()=>{gJ();E();M();sJ=function(){function z(){}return z.getInstance=function(){if(!this._instance)this._instance=new z;return this._instance},z.prototype.setGlobalMeterProvider=function(J){return O(_z,J,G.instance())},z.prototype.getMeterProvider=function(){return j(_z)||pJ},z.prototype.getMeter=function(J,Z,$){return this.getMeterProvider().getMeter(J,Z,$)},z.prototype.disable=function(){k(_z,G.instance())},z}()});var uz;var iJ=F(()=>{nJ();uz=sJ.getInstance()});var tJ;var oJ=F(()=>{tJ=function(){function z(){}return z.prototype.inject=function(J,Z){},z.prototype.extract=function(J,Z){return J},z.prototype.fields=function(){return[]},z}()});function cz(z){return z.getValue(mz)||void 0}function aJ(){return cz(D.getInstance().active())}function rJ(z,J){return z.setValue(mz,J)}function eJ(z){return z.deleteValue(mz)}var mz;var zZ=F(()=>{_();L();mz=R("OpenTelemetry Baggage Key")});var lz="propagation",W0,JZ;var ZZ=F(()=>{E();oJ();Tz();zZ();Vz();M();W0=new tJ,JZ=function(){function z(){this.createBaggage=GJ,this.getBaggage=cz,this.getActiveBaggage=aJ,this.setBaggage=rJ,this.deleteBaggage=eJ}return z.getInstance=function(){if(!this._instance)this._instance=new z;return this._instance},z.prototype.setGlobalPropagator=function(J){return O(lz,J,G.instance())},z.prototype.inject=function(J,Z,$){if($===void 0)$=r;return this._getGlobalPropagator().inject(J,Z,$)},z.prototype.extract=function(J,Z,$){if($===void 0)$=a;return this._getGlobalPropagator().extract(J,Z,$)},z.prototype.fields=function(){return this._getGlobalPropagator().fields()},z.prototype.disable=function(){k(lz,G.instance())},z.prototype._getGlobalPropagator=function(){return j(lz)||W0},z}()});var pz;var $Z=F(()=>{ZZ();pz=JZ.getInstance()});var gz="trace",QZ;var HZ=F(()=>{E();yz();Qz();Iz();M();QZ=function(){function z(){this._proxyTracerProvider=new l,this.wrapSpanContext=RJ,this.isSpanContextValid=A,this.deleteSpan=MJ,this.getSpan=Zz,this.getActiveSpan=EJ,this.getSpanContext=$z,this.setSpan=c,this.setSpanContext=TJ}return z.getInstance=function(){if(!this._instance)this._instance=new z;return this._instance},z.prototype.setGlobalTracerProvider=function(J){var Z=O(gz,this._proxyTracerProvider,G.instance());if(Z)this._proxyTracerProvider.setDelegate(J);return Z},z.prototype.getTracerProvider=function(){return j(gz)||this._proxyTracerProvider},z.prototype.getTracer=function(J,Z){return this.getTracerProvider().getTracer(J,Z)},z.prototype.disable=function(){k(gz,G.instance()),this._proxyTracerProvider=new l},z}()});var sz;var WZ=F(()=>{HZ();sz=QZ.getInstance()});var Fz={};zJ(Fz,{trace:()=>sz,propagation:()=>pz,metrics:()=>uz,isValidTraceId:()=>xz,isValidSpanId:()=>bz,isSpanContextValid:()=>A,diag:()=>Lz,defaultTextMapSetter:()=>r,defaultTextMapGetter:()=>a,default:()=>X0,createTraceState:()=>uJ,createNoopMeter:()=>kJ,createContextKey:()=>R,context:()=>Sz,baggageEntryMetadataFromString:()=>jJ,ValueType:()=>o,TraceFlags:()=>f,SpanStatusCode:()=>Yz,SpanKind:()=>qz,SamplingDecision:()=>Xz,ROOT_CONTEXT:()=>i,ProxyTracerProvider:()=>l,ProxyTracer:()=>Wz,INVALID_TRACEID:()=>m,INVALID_SPAN_CONTEXT:()=>e,INVALID_SPANID:()=>u,DiagLogLevel:()=>w,DiagConsoleLogger:()=>UJ});var X0;var hz=F(()=>{Vz();L();OJ();n();Mz();VJ();Tz();Nz();yz();IJ();xJ();bJ();fz();mJ();Qz();zz();cJ();lJ();iJ();$Z();WZ();X0={context:Sz,diag:Lz,metrics:uz,propagation:pz,trace:sz}});var Bz;var XZ=F(()=>{(function(z){z[z.UNSPECIFIED=0]="UNSPECIFIED",z[z.TRACE=1]="TRACE",z[z.TRACE2=2]="TRACE2",z[z.TRACE3=3]="TRACE3",z[z.TRACE4=4]="TRACE4",z[z.DEBUG=5]="DEBUG",z[z.DEBUG2=6]="DEBUG2",z[z.DEBUG3=7]="DEBUG3",z[z.DEBUG4=8]="DEBUG4",z[z.INFO=9]="INFO",z[z.INFO2=10]="INFO2",z[z.INFO3=11]="INFO3",z[z.INFO4=12]="INFO4",z[z.WARN=13]="WARN",z[z.WARN2=14]="WARN2",z[z.WARN3=15]="WARN3",z[z.WARN4=16]="WARN4",z[z.ERROR=17]="ERROR",z[z.ERROR2=18]="ERROR2",z[z.ERROR3=19]="ERROR3",z[z.ERROR4=20]="ERROR4",z[z.FATAL=21]="FATAL",z[z.FATAL2=22]="FATAL2",z[z.FATAL3=23]="FATAL3",z[z.FATAL4=24]="FATAL4"})(Bz||(Bz={}))});class I{emit(z){}}var Kz;var wz=F(()=>{Kz=new I});class Gz{getLogger(z,J,Z){return new I}}var x;var jz=F(()=>{wz();x=new Gz});class p{constructor(z,J,Z,$){this._provider=z,this.name=J,this.version=Z,this.options=$}emit(z){this._getLogger().emit(z)}_getLogger(){if(this._delegate)return this._delegate;let z=this._provider.getDelegateLogger(this.name,this.version,this.options);if(!z)return Kz;return this._delegate=z,this._delegate}}var nz=F(()=>{wz()});class b{getLogger(z,J,Z){var $;return($=this.getDelegateLogger(z,J,Z))!==null&&$!==void 0?$:new p(this,z,J,Z)}getDelegate(){var z;return(z=this._delegate)!==null&&z!==void 0?z:x}setDelegate(z){this._delegate=z}getDelegateLogger(z,J,Z){var $;return($=this._delegate)===null||$===void 0?void 0:$.getLogger(z,J,Z)}}var iz=F(()=>{jz();nz()});var tz;var qZ=F(()=>{tz=typeof globalThis==="object"?globalThis:typeof self==="object"?self:typeof window==="object"?window:typeof global==="object"?global:{}});var YZ=F(()=>{qZ()});function FZ(z,J,Z){return($)=>$===z?J:Z}var g,P,oz=1;var hZ=F(()=>{YZ();g=Symbol.for("io.opentelemetry.js.api.logs"),P=tz});class Uz{constructor(){this._proxyLoggerProvider=new b}static getInstance(){if(!this._instance)this._instance=new Uz;return this._instance}setGlobalLoggerProvider(z){if(P[g])return this.getLoggerProvider();return P[g]=FZ(oz,z,x),this._proxyLoggerProvider.setDelegate(z),z}getLoggerProvider(){var z,J;return(J=(z=P[g])===null||z===void 0?void 0:z.call(P,oz))!==null&&J!==void 0?J:this._proxyLoggerProvider}getLogger(z,J,Z){return this.getLoggerProvider().getLogger(z,J,Z)}disable(){delete P[g],this._proxyLoggerProvider=new b}}var BZ=F(()=>{hZ();jz();iz()});var KZ={};zJ(KZ,{logs:()=>q0,SeverityNumber:()=>Bz,ProxyLoggerProvider:()=>b,ProxyLogger:()=>p,NoopLoggerProvider:()=>Gz,NoopLogger:()=>I,NOOP_LOGGER_PROVIDER:()=>x,NOOP_LOGGER:()=>Kz});var q0;var wZ=F(()=>{XZ();wz();jz();nz();iz();BZ();q0=Uz.getInstance()});var Y0={enabled:!0,serviceName:"lit-status-sdk",serviceVersion:"1.0.0",otlpEndpoint:"",exportToConsole:!0,exportIntervalMs:1e4};class az{config;isInitialized=!1;hasOpenTelemetry=!1;tracer=null;meter=null;logger=null;functionExecutionCounter=null;functionExecutionDuration=null;functionErrorCounter=null;constructor(z={}){this.config={...Y0,...z}}async initialize(){if(!this.config.enabled||this.isInitialized)return;if(typeof globalThis!=="undefined"&&"window"in globalThis){console.warn("⚠️ OpenTelemetry is not supported in browser environments");return}try{await this.initializeOpenTelemetry(),this.hasOpenTelemetry=!0,this.isInitialized=!0,console.log("✅ Lit Status SDK OpenTelemetry initialized")}catch(z){console.warn("⚠️ OpenTelemetry not available (continuing without telemetry):",z.message),console.warn("\uD83D\uDCA1 To enable OpenTelemetry, install the optional dependencies:"),console.warn("   npm install @opentelemetry/api @opentelemetry/api-logs @opentelemetry/resources @opentelemetry/semantic-conventions @opentelemetry/sdk-metrics @opentelemetry/exporter-metrics-otlp-http @opentelemetry/sdk-logs @opentelemetry/exporter-logs-otlp-http @opentelemetry/sdk-trace-node @opentelemetry/exporter-trace-otlp-http @opentelemetry/sdk-trace-base")}}async initializeOpenTelemetry(){try{let{metrics:z,trace:J,SpanStatusCode:Z}=await Promise.resolve().then(() => (hz(),Fz)),{logs:$}=await Promise.resolve().then(() => (wZ(),KZ));if(this.tracer=J.getTracer(this.config.serviceName,this.config.serviceVersion),this.meter=z.getMeter(this.config.serviceName,this.config.serviceVersion),this.logger=$.getLogger(this.config.serviceName,this.config.serviceVersion),this.meter)this.functionExecutionCounter=this.meter.createCounter("lit_function_executions_total",{description:"Total number of function executions",unit:"1"}),this.functionExecutionDuration=this.meter.createHistogram("lit_function_execution_duration_ms",{description:"Function execution duration in milliseconds",unit:"ms"}),this.functionErrorCounter=this.meter.createCounter("lit_function_errors_total",{description:"Total number of function execution errors",unit:"1"})}catch(z){throw new Error(`OpenTelemetry packages not available: ${z.message}`)}}async instrumentExecution(z,J,Z,$,H){let Q=performance.now(),X,Y;if(!this.hasOpenTelemetry){try{X=await H()}catch(W){Y=W}return{result:X,error:Y,duration:performance.now()-Q}}let h=this.tracer?.startSpan(`execute_${J}`,{attributes:{"lit.function.id":z,"lit.function.name":J,"lit.network":Z,"lit.product":$}});try{if(X=await H(),h)try{let{SpanStatusCode:W}=await Promise.resolve().then(() => (hz(),Fz));h.setStatus({code:W.OK})}catch{}this.functionExecutionCounter?.add(1,{function_name:J,network:Z,product:$,status:"success"})}catch(W){if(Y=W,h)try{let{SpanStatusCode:q}=await Promise.resolve().then(() => (hz(),Fz));h.setStatus({code:q.ERROR,message:Y.message}),h.recordException(Y)}catch{}this.functionExecutionCounter?.add(1,{function_name:J,network:Z,product:$,status:"error"}),this.functionErrorCounter?.add(1,{function_name:J,network:Z,product:$,error_type:Y.constructor.name})}finally{let W=performance.now()-Q;if(this.functionExecutionDuration?.record(W,{function_name:J,network:Z,product:$,status:Y?"error":"success"}),h)h.setAttribute("lit.duration_ms",W),h.end();return this.logger?.emit({severityText:Y?"ERROR":"INFO",body:`Function ${J} ${Y?"failed":"completed"} in ${W.toFixed(2)}ms`,attributes:{"lit.function.id":z,"lit.function.name":J,"lit.network":Z,"lit.product":$,"lit.duration_ms":W,"lit.success":!Y,...Y&&{"lit.error_message":Y.message}}}),{result:X,error:Y,duration:W}}}isEnabled(){return this.config.enabled&&this.isInitialized&&this.hasOpenTelemetry}async shutdown(){if(this.hasOpenTelemetry)console.log("\uD83D\uDD04 Shutting down Lit Status SDK OpenTelemetry");this.isInitialized=!1,this.hasOpenTelemetry=!1}}class Oz extends Error{statusCode;response;constructor(z,J,Z){super(z);this.statusCode=J;this.response=Z;this.name="LitStatusError"}}function r6(z){let{url:J,apiKey:Z,fetch:$=globalThis.fetch,openTelemetry:H}=z,Q=J.endsWith("/")?J.slice(0,-1):J,X=new az(H);X.initialize();async function Y(W,q={}){let B=await $(`${Q}${W}`,{...q,headers:{"Content-Type":"application/json","X-API-Key":Z,...q.headers}}),K=await B.json();if(!B.ok)throw new Oz(K.error||`Request failed with status ${B.status}`,B.status,K);return K}async function h(W,q={}){let B=await $(`${Q}${W}`,{...q,headers:{"X-API-Key":Z,...q.headers}}),K=await B.text();if(!B.ok)throw new Oz(`Request failed with status ${B.status}`,B.status,K);return K}return{async healthCheck(){return Y("/health")},async createOrUpdateFunction(W){return Y("/functions",{method:"POST",body:JSON.stringify(W)})},async getFunction(W,q,B){try{return await Y(`/functions/${encodeURIComponent(W)}/${encodeURIComponent(q)}/${encodeURIComponent(B)}`)}catch(K){if(K instanceof Oz&&K.statusCode===404)return null;throw K}},async getAllFunctions(W=!1){let q=new URLSearchParams;if(W)q.set("includeInactive","true");return Y(`/functions${q.toString()?`?${q.toString()}`:""}`)},async logExecution(W,q){return Y(`/functions/${encodeURIComponent(W)}/logs`,{method:"POST",body:JSON.stringify(q)})},async getFunctionMetrics(W,q){let B=new URLSearchParams;if(q?.startDate)B.set("startDate",new Date(q.startDate).toISOString());if(q?.endDate)B.set("endDate",new Date(q.endDate).toISOString());return Y(`/functions/${encodeURIComponent(W)}/metrics${B.toString()?`?${B.toString()}`:""}`)},async getAllMetrics(W){let q=new URLSearchParams;if(W?.startDate)q.set("startDate",new Date(W.startDate).toISOString());if(W?.endDate)q.set("endDate",new Date(W.endDate).toISOString());return Y(`/metrics${q.toString()?`?${q.toString()}`:""}`)},async getFunctionMetricsTimeSeries(W,q,B){let K=new URLSearchParams;if(q?.startDate)K.set("startDate",new Date(q.startDate).toISOString());if(q?.endDate)K.set("endDate",new Date(q.endDate).toISOString());if(B)K.set("granularity",B);return Y(`/functions/${encodeURIComponent(W)}/metrics/timeseries${K.toString()?`?${K.toString()}`:""}`)},async executeAndLog(W,q){let B=`func_${W.slice(-8)}`,K="unknown",rz="unknown",{result:kz,error:U,duration:d}=await X.instrumentExecution(W,B,"unknown","unknown",q),N=!U?{isSuccess:!0,responseTimeMs:Math.round(d)}:{isSuccess:!1,errorMessage:`${U.name}: ${U.message}${U.stack?`
`+U.stack:""}`,responseTimeMs:Math.round(d)},s;try{s=await this.logExecution(W,N)}catch(ez){if(console.error("Failed to log execution:",ez),U)throw U;throw ez}if(U)throw U;return{result:kz,log:s}},async getOrRegisterFunctions(W){let{network:q,product:B,description:K,isActive:rz}=W,kz=W.functions.map((N)=>this.createOrUpdateFunction({name:N,network:q,product:B,description:K,isActive:rz})),U=await Promise.all(kz),d={};return W.functions.forEach((N,s)=>{d[N]=U[s]}),d},async exportMetricsPrometheus(W){let q=new URLSearchParams;if(q.set("format","prometheus"),W?.network)q.set("network",W.network);if(W?.product)q.set("product",W.product);if(W?.function)q.set("function",W.function);if(W?.includeInactive)q.set("includeInactive","true");if(W?.startDate)q.set("startDate",new Date(W.startDate).toISOString());if(W?.endDate)q.set("endDate",new Date(W.endDate).toISOString());return h(`/metrics/export?${q.toString()}`)},async exportMetricsJSON(W){let q=new URLSearchParams;if(q.set("format","json"),W?.network)q.set("network",W.network);if(W?.product)q.set("product",W.product);if(W?.function)q.set("function",W.function);if(W?.includeInactive)q.set("includeInactive","true");if(W?.startDate)q.set("startDate",new Date(W.startDate).toISOString());if(W?.endDate)q.set("endDate",new Date(W.endDate).toISOString());return Y(`/metrics/export?${q.toString()}`)},async getFilterOptions(){return Y("/metrics/filters")}}}export{r6 as createLitStatusClient,az as LitStatusTelemetry,Oz as LitStatusError};

//# debugId=B6DCC51859EE650064756E2164756E21
//# sourceMappingURL=index.js.map
